<div class="container">
    <div class="results">
        <div class="no-items" *ngIf="healthCares.length === 0">
            <p>{{validations.noHealthCaresFound}}</p>
        </div>
        <div class="item" *ngFor="let healthCare of pagedHealthCares">
            <div class="item-field" *ngIf="healthCare.name">
                <span>{{menu.for}}: {{healthCare.name}}</span>
                <span class="manipulations">
                    <a class="button" (click)="edit(healthCare)">{{menu.edit}}</a>
                    <a class="button" (click)="remove(healthCare)">{{menu.delete}}</a>
                </span>
            </div>
            <div class="item-field" *ngIf="healthCare.date">
                <span>{{menu.date}}:</span> {{healthCare.date}}
            </div>
            <div class="item-field" *ngIf="healthCare.reminder">
                <span>{{menu.reminder}}:</span> {{healthCare.reminder}}
            </div>
            <div class="item-field" *ngIf="healthCare.price">
                <span>{{menu.price}}:</span> {{healthCare.price}}
            </div>
            <div class="item-field" *ngIf="healthCare.notes">
                <span>{{menu.notes}}:</span> {{healthCare.notes}}
            </div>
            <div class="item-field" *ngIf="healthCare.company?.name">
                <span>{{company.name}}:</span> {{healthCare.company?.name}}
            </div>
            <div class="item-field" *ngIf="healthCare.company?.phoneNumber">
                <span>{{company.phoneNumber}}:</span> {{healthCare.company?.phoneNumber}}
            </div>
            <div class="item-field" *ngIf="healthCare.company?.email">
                <span>{{company.email}}:</span> {{healthCare.company?.email}}
            </div>
            <div class="item-field" *ngIf="healthCare.company?.webSite">
                <span>{{company.webSite}}:</span> {{healthCare.company?.webSite}}
            </div>
            <div class="item-field" *ngIf="healthCare.company?.address">
                <span>{{company.address}}:</span> {{healthCare.company?.address}}
            </div>
        </div>

        <app-page *ngIf="healthCares.length > 0" class="pager-view" [pager]="pager"></app-page>

    </div>
    <div class="creation">
        <form class="form" #health="ngForm" (ngSubmit)="save(health.value)">
            <div class="main">
                <div class="title">{{menu.title}}</div>
                <div class="form-field">
                    <div class="label">{{menu.for}} <span class="requiredInput">{{menu.required}}</span></div>
                    <div *ngIf="this.selectedLang === 'bg'">
                        <select name="name" [(ngModel)]="defaultHealthCare.name" required>
                            <option *ngFor="let name of names.bg" [value]="name">{{name}}</option>
                        </select>
                    </div>
                    <div *ngIf="this.selectedLang === 'en'">
                        <select name="name" [(ngModel)]="defaultHealthCare.name" required>
                            <option *ngFor="let name of names.en" [value]="name">{{name}}</option>
                        </select>
                    </div>
                </div>

                <div class="form-field">
                    <div class="label">{{menu.date}}</div>
                    <input type="date" name="date" [(ngModel)]="defaultHealthCare.date">
                </div>

                <div class="form-field">
                    <div class="label">{{menu.reminder}}</div>
                    <input type="date" name="reminder" [(ngModel)]="defaultHealthCare.reminder">
                </div>

                <div class="form-field">
                    <div class="label">{{menu.price}}</div>
                    <input type="number" name="price" [(ngModel)]="defaultHealthCare.price">
                </div>

                <div class="form-field">
                    <div class="label">{{menu.notes}}</div>
                    <textarea type="text" name="notes" [(ngModel)]="defaultHealthCare.notes"></textarea>
                </div>

                <div *ngIf="healthCares.length > 0">
                    <div *ngFor="let error of errors">
                        <p class="validation">{{error}}</p>
                    </div>
                </div>

                <div>
                    <button class="button" [disabled]="health.invalid || (
                            defaultHealthCare.company.name === undefined && 
                        ((defaultHealthCare.company.phoneNumber !== undefined && defaultHealthCare.company.phoneNumber !== '') ||
                        (defaultHealthCare.company.email !== undefined && defaultHealthCare.company.email !== '') ||
                        (defaultHealthCare.company.webSite !== undefined && defaultHealthCare.company.webSite !== '') ||
                        (defaultHealthCare.company.address !== undefined && defaultHealthCare.company.address !== ''))
                        )">{{menu.save}}
                    </button>
                </div>
            </div>

            <app-company-form [company]="defaultHealthCare.company" ngModelGroup="company" class="company"></app-company-form>

        </form>
    </div>
</div>